(this["webpackJsonpstart-officer-app"]=this["webpackJsonpstart-officer-app"]||[]).push([[0],{20:function(e,t,a){},25:function(e,t,a){},29:function(e,t,a){e.exports=a(48)},34:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),l=a.n(c),i=a(9),o=a(4),u=a(6),s=a(2),m=a(3),b=a(18),f=(a(20),function(e){var t=e.selectable,a=void 0!==t&&t,n=e.aircraft,c=n.tailNumber,l=n.tailNumberColor,i=e.selected,o=void 0!==i&&i,u=e.onClick,s=void 0===u?function(){}:u,m={color:l};return r.a.createElement("span",{onClick:function(){return s(c)},style:m,className:"aircraft-container"},r.a.createElement("h1",null,c),a&&o?r.a.createElement("span",{className:"check-mark"},r.a.createElement("i",{className:"fas fa-check"})):"")}),d=function(e){var t=e.aircraft,a=t.tailNumber,n=t.tailNumberColor,c=(t.selected,e.pilot.name),l=e.onClick,i=void 0===l?function(){}:l,o={color:n};return r.a.createElement("div",{onClick:function(){return i(a)},className:"aircraft-with-pilot-container"},r.a.createElement("div",{className:"flex"},r.a.createElement("span",{style:o,className:"tail-number"},r.a.createElement("h1",null,a)),r.a.createElement("p",null,c)))},O=function(e,t){var a=Object(n.useState)((function(){try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(n){return console.log(n),t}})),r=Object(s.a)(a,2),c=r[0],l=r[1];return[c,function(t){try{var a=t instanceof Function?t(c):t;l(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(n){console.log(n)}}]},j=(a(25),function(e){var t=e.assign,a=e.aircraft.tailNumber,c=e.isFlying,l=e.pilot,i=((l=void 0===l?{}:l).id,l.name),o=void 0===i?"Not Assigned":i,u=e.unAssign,m=Object(n.useState)(!1),b=Object(s.a)(m,2),f=b[0],d=b[1],j=O("pilots",[]),p=Object(s.a)(j,1)[0],E=Object(n.useRef)();!function(e,t){Object(n.useEffect)((function(){var a=function(a){e.current&&!e.current.contains(a.target)&&t(a)};return document.addEventListener("mousedown",a),document.addEventListener("touchstart",a),function(){document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a)}}),[e,t])}(E,(function(){return d(!1)}));var v=Object(n.useCallback)((function(e,a){d(!1),t(e,a)}),[d,t]),N=Object(n.useCallback)((function(e){d(!1),e.stopPropagation()}),[d]);return r.a.createElement("div",{onClick:function(){return d(!c)},className:"pilot-container assignable"},r.a.createElement("h2",null,o||""),f?r.a.createElement("div",{onClick:function(e){return N(e)},ref:E,className:"pilot-selection-menu"},p.filter((function(e){return e.active})).map((function(e){var t=e.id,n=e.name;return r.a.createElement("p",{key:t,onClick:function(){return v(t,a)}},n)})),r.a.createElement("p",{className:"danger",onClick:function(){return u(a)}},"Remove")):"")}),p=a(49),E=a(10),v=a.n(E),N=a(26),g=a.n(N),k=a(27),C=a.n(k),h={dbo:["ZD","808"],solo:["LUC","WD","FD"],vvo:["LUC","WD","FD"],spl:["LUC","WD","FD"]};a(34);v.a.extend(g.a),v.a.extend(C.a);var y=function(e,t){var a=t.transform,n={};return a&&(n={transform:"translate(0, ".concat(a.substring(a.indexOf(",")+1,a.indexOf(")")),")")}),Object(m.a)(Object(m.a)({userSelect:"none"},t),n)},x=function(){var e=O("selected-gliders",{}),t=Object(s.a)(e,2),a=t[0],c=t[1],l=O("pilots",[]),i=Object(s.a)(l,1)[0],o=O("pilot-preferences",[]),E=Object(s.a)(o,1)[0],N=O("assigned-pilots",{}),g=Object(s.a)(N,2),k=g[0],C=g[1],x=O("flying",{}),D=Object(s.a)(x,2),Y=D[0],w=D[1],I=O("flights",[]),P=Object(s.a)(I,2),S=P[0],H=P[1],M=Object(n.useState)(!1),F=Object(s.a)(M,2),L=F[0],A=F[1],T=Object(n.useCallback)((function(e){return S.filter((function(t){var a=t.exclude,n=t.pilotInCommand.id;return!a&&n===e})).length}),[S]),R=Object(n.useCallback)((function(e,t){var n=Object(m.a)({},a),r=function(e,t,a){var n=Array.from(e),r=n.splice(t,1),c=Object(s.a)(r,1)[0];return n.splice(a,0,c),n}(Object.values(n).sort((function(e,t){return e.order-t.order})),e,t);c(Object(m.a)({},Object.fromEntries(r.map((function(e,t){return Object(m.a)(Object(m.a)({},e),{},{order:t})})).map((function(e){return[e.tailNumber,e]})))))}),[a,c]),W=Object(n.useCallback)((function(e){A(!1);var t=Y[e.tailNumber],a=t.takeOffTime,n=t.pilotInCommand,r=v()().format("DD-MM-YYYY HH:mm"),c=v.a.duration(v()(r,"DD-MM-YYYY HH:mm").diff(v()(a,"DD-MM-YYYY HH:mm"))).format("HH:mm"),l=[].concat(Object(u.a)(S),[{id:Object(p.a)(),glider:e,pilotInCommand:n,takeOffTime:a,landingTime:r,durationOfFlight:c}]);H(l);var i=Object(m.a)({},Y);delete i[e.tailNumber],w(i);var o=Object(m.a)({},k);delete o[e.tailNumber],C(o)}),[k,Y,S,C,w,H]),J=Object(n.useCallback)((function(){var e=Object.values(a).find((function(e){return 0===e.order}));if(k[e.tailNumber]&&!Y[e.tailNumber]){R(0,Object.keys(a).length-1);var t=Object(m.a)({},Y);t[e.tailNumber]={pilotInCommand:k[e.tailNumber],takeOffTime:v()().format("DD-MM-YYYY HH:mm")},w(Object(m.a)({},t))}}),[a,k,R,Y,w]),U=Object(n.useCallback)((function(e){var t=e.source,a=e.destination;a&&R(t.index,a.index)}),[R]),B=Object(n.useCallback)((function(e,t){var a=Object(m.a)({},k);a[t]=i.find((function(t){return t.id===e})),C(a)}),[k,C,i]),Z=Object(n.useCallback)((function(e){var t=Object(m.a)({},k);delete t[e],C(t)}),[k,C]),q=Object(n.useCallback)((function(){!L&&Object.keys(Y).length?A(!0):A(!1)}),[Y,L]),z=Object(n.useCallback)((function(){var e=Object.keys(k),t=Object.values(a).filter((function(t){return-1===e.indexOf(t.tailNumber)})),n=i.filter((function(e){return!Object.values(k).some((function(t){return t.id===e.id}))&&e.active})).sort((function(e,t){return T(e.id)===T(t.id)?e.order-t.order:T(e.id)-T(t.id)})),r=[];t.sort((function(e,t){return e.order-t.order})).forEach((function(e,t){n.filter((function(e){return-1===r.map((function(e){return e.pilotId})).indexOf(e.id)})).some((function(t){var a=E[t.id];if(!a||a&&!Object.keys(a).length){var n=t.type;if(!n)return!1;a=h[n]}else a=Object.keys(a);return-1!==a.indexOf(e.tailNumber)&&(r=[].concat(Object(u.a)(r),[{pilotId:t.id,tailNumber:e.tailNumber}]),!0)}))}));var c=Object(m.a)({},k);r.forEach((function(e){var t=e.pilotId,a=e.tailNumber;c[a]=i.find((function(e){var a=e.id;return t===a}))})),C(c)}),[k,T,i,E,a,C]),G=Object(n.useCallback)((function(){var e=Object.keys(Y),t=Object.fromEntries(Object.entries(k).filter((function(t){var a=Object(s.a)(t,2),n=a[0];a[1];return-1!==e.indexOf(n)})));C(Object(m.a)({},t))}),[k,Y,C]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container no-padding startline-container"},r.a.createElement(b.a,{onDragEnd:U},r.a.createElement(b.c,{droppableId:"droppable"},(function(e,t){return r.a.createElement("div",Object.assign({className:"list-container"},e.droppableProps,{ref:e.innerRef}),Object.values(a).sort((function(e,t){return e.order-t.order})).map((function(e,t){return r.a.createElement(b.b,{key:e.tailNumber,draggableId:e.tailNumber,index:t,isDragDisabled:void 0!==Y[e.tailNumber]},(function(t,a){return r.a.createElement("div",Object.assign({className:"starting-line-position ".concat(Y[e.tailNumber]?"flying":""),ref:t.innerRef},t.draggableProps,t.dragHandleProps,{style:y(a.isDragging,t.draggableProps.style)}),r.a.createElement("div",{className:"grass"},r.a.createElement(f,{aircraft:e})),r.a.createElement("div",{className:"container pilot ".concat(a.isDragging?"is-dragging":"")},r.a.createElement(j,{isFlying:Y[e.tailNumber],unAssign:Z,assign:B,aircraft:e,pilot:k[e.tailNumber]})))}))})),e.placeholder)})))),L?r.a.createElement("div",{className:"flying-gliders"},Object.keys(Y).map((function(e){return a[e]})).map((function(e){return r.a.createElement(d,{onClick:function(){return W(e)},key:e.tailNumber,pilot:k[e.tailNumber],aircraft:e})}))):"",r.a.createElement("div",{className:"startline-controls"},r.a.createElement("div",{className:"left"},r.a.createElement("button",{onClick:J,className:"button launch-button green"},r.a.createElement("i",{className:"fas fa-plane-departure"})),r.a.createElement("button",{onClick:function(){return q()},className:"button land-button red"},r.a.createElement("i",{className:"fas fa-plane-arrival"})),r.a.createElement("button",{onClick:function(){return z()},className:"button land-button blue"},r.a.createElement("i",{className:"fas fa-magic"}))),r.a.createElement("div",{className:"right"},r.a.createElement("button",{onClick:function(){return G()},className:"button"},r.a.createElement("i",{className:"fas fa-redo"})))))},D=function(e){var t=e.remove,a=e.toggleType,c=e.hideControls,l=e.hasPreferences,i=e.pilot,o=(i=void 0===i?{}:i).id,u=i.name,m=i.type,b=e.onClick,f=void 0===b?function(){}:b,d=O("flights",[]),j=Object(s.a)(d,1)[0],p=Object(n.useCallback)((function(e){return j.filter((function(t){var a=t.exclude,n=t.pilotInCommand.id;return!a&&n===e})).length}),[j]);return r.a.createElement("div",{onClick:f,className:"pilot-container"},r.a.createElement("div",{className:"flex"},r.a.createElement("h2",null,u||""),l?r.a.createElement("span",{className:"led red"}):""),c?"":r.a.createElement("div",{className:"controls"},r.a.createElement("span",{className:"starts-badge"},p(o)),r.a.createElement("span",{onClick:function(){return a(o)},className:"type-button ".concat(m)},m||"???"),r.a.createElement("i",{onClick:t,className:"fas fa-times"})))},Y=(a(38),function(e){var t=e.addPilot,a=Object(n.useState)(""),c=Object(s.a)(a,2),l=c[0],i=c[1],o=Object(n.useCallback)((function(e){t(e),i("")}),[t]);return r.a.createElement("div",{className:"new-pilot-container"},r.a.createElement("input",{onChange:function(e){var t=e.target.value;return i(t)},type:"text",placeholder:"New Pilot",value:l}),r.a.createElement("button",{className:"green",onClick:function(){return o(l)},disabled:l.length<1},r.a.createElement("i",{className:"fas fa-plus"})))}),w=(a(39),["dbo","solo","vvo","spl"]),I=function(){var e=O("pilots",[]),t=Object(s.a)(e,2),a=t[0],c=t[1],l=O("selected-gliders",{}),o=Object(s.a)(l,2),b=(o[0],o[1]),f=O("flights",[]),d=Object(s.a)(f,2),j=(d[0],d[1]),E=O("pilot-preferences",{}),v=Object(s.a)(E,2),N=v[0],g=v[1],k=O("assigned-pilots",[]),C=Object(s.a)(k,2),h=C[0],y=C[1],x=Object(n.useState)(!1),I=Object(s.a)(x,2),P=I[0],S=I[1],H=Object(n.useState)(!1),M=Object(s.a)(H,2),F=M[0],L=M[1],A=Object(n.useCallback)((function(e){var t=a.findIndex((function(t){return t.name.toLowerCase()===e.toLowerCase()})),n={};if(-1!==t){var r=a[t];n=Object(m.a)(Object(m.a)({},r),{},{priority:a.filter((function(e){return e.active})).length,active:!0}),c([].concat(Object(u.a)(a.slice(0,t)),[Object(m.a)({},n)],Object(u.a)(a.slice(t+1))))}else n={id:Object(p.a)(),priority:a.filter((function(e){return e.active})).length,name:e,active:!0},c([].concat(Object(u.a)(a),[Object(m.a)({},n)]));if(!N[n.id]){var l=Object(m.a)({},N);l[n.id]={},g(l)}}),[a,N,c,g]),T=Object(n.useCallback)((function(e){var t=Object.fromEntries(Object.entries(Object(m.a)({},h)).filter((function(t){var a=Object(s.a)(t,2);a[0];return a[1].id!==e})));y(Object(m.a)({},t));var n=a.findIndex((function(t){return t.id===e})),r=a[n];c([].concat(Object(u.a)(a.slice(0,n)),[Object(m.a)(Object(m.a)({},r),{},{active:!1})],Object(u.a)(a.slice(n+1))))}),[a,c,h,y]),R=Object(n.useCallback)((function(e){var t=a.findIndex((function(t){return t.id===e})),n=function(e){var t=w.findIndex((function(t){return t===e.type}))+1;return t>=w.length&&(t=0),Object(m.a)(Object(m.a)({},e),{},{type:w[t]})}(a[t]);c([].concat(Object(u.a)(a.slice(0,t)),[n],Object(u.a)(a.slice(t+1))))}),[a,c]),W=Object(n.useCallback)((function(){var e=a.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{active:!1})}));b({}),j([]),c(Object(u.a)(e)),S(!1)}),[a,j,c,b]),J=Object(n.useCallback)((function(){S(!0),L("This will reset all pilots, flights, and aircraft! You sure about that?")}),[S,L]);return r.a.createElement("div",{className:"container pilot-list-container"},r.a.createElement("div",{className:"pilot-list"},a.filter((function(e){return e.active})).sort((function(e,t){return e.priority-t.priority})).map((function(e){return r.a.createElement(D,{hasPreferences:Object.keys(N[e.id]).length,key:e.id,toggleType:R,remove:function(){return T(e.id)},pilot:e})}))),r.a.createElement(Y,{addPilot:A}),r.a.createElement("button",{onClick:J,className:"reset-button red"},"Reset Day ",r.a.createElement("span",{"aria-label":"warning",role:"img"},"\u26a0\ufe0f")),r.a.createElement(i.b,{to:"/settings"},r.a.createElement("button",{className:"settings-button blue"},"Settings")),P?r.a.createElement("div",{className:"confirm-dialog"},r.a.createElement("h2",null,"Are you sure?"),r.a.createElement("p",null,F),r.a.createElement("div",{className:"controls"},r.a.createElement("button",{onClick:function(){return W()},className:"settings-button green"},"Yes"),r.a.createElement("button",{onClick:function(){return S(!1)},className:"settings-button red"},"No"))):"")},P=[{tailNumber:"808",tailNumberColor:"#12428a"},{tailNumber:"ZD",tailNumberColor:"#d42e2e"},{tailNumber:"LUC",tailNumberColor:"#ff7f09"},{tailNumber:"FD",tailNumberColor:"#b42323"},{tailNumber:"WD",tailNumberColor:"#787878"},{tailNumber:"WB1",tailNumberColor:"#787878"}],S=(a(42),function(e){var t=e.onClick,a=e.selectedPreferences,c=e.isPreferences,l=O("selected-gliders",{}),i=Object(s.a)(l,2),o=i[0],u=i[1],b=O("flying",{}),d=Object(s.a)(b,1)[0],j=Object(n.useCallback)((function(e){return void 0!==d[e]}),[d]),p=Object(n.useMemo)((function(){return P.map((function(e){var t=void 0!==o[e.tailNumber];return Object(m.a)(Object(m.a)({},e),{},{selected:t})}))}),[o]),E=Object(n.useCallback)((function(e){var t=Object.entries(o).length,a=Object(m.a)({},o);a[e]&&!j(e)?(delete a[e],a=Object.fromEntries(Object.entries(a).map((function(e,t){var a=Object(s.a)(e,2),n=a[0],r=a[1];return[n,Object(m.a)(Object(m.a)({},r),{},{order:t})]})))):(a[e]=p.find((function(t){return t.tailNumber===e})),a[e].order=t),u(a)}),[o,j,u,p]);return r.a.createElement("div",{className:"container aircraft-list-container"},c?r.a.createElement("div",{className:"aircraft-list preferences-for-pilot"},p.map((function(e){return r.a.createElement(f,{onClick:function(){return t(e)},key:e.tailNumber,aircraft:e,selected:a&&a[e.tailNumber],selectable:!0})}))):r.a.createElement("div",{className:"aircraft-list"},p.map((function(e){return r.a.createElement(f,{onClick:E,key:e.tailNumber,aircraft:e,selected:e.selected,selectable:!0})}))))}),H=(a(43),function(){var e=O("pilots",[]),t=Object(s.a)(e,1)[0],a=O("pilot-preferences",{}),c=Object(s.a)(a,2),l=c[0],i=c[1],o=Object(n.useState)(null),u=Object(s.a)(o,2),b=u[0],f=u[1],d=Object(n.useCallback)((function(e){f(e)}),[f]),j=Object(n.useCallback)((function(e){var t=Object(m.a)({},l);t[b.id]||(t[b.id]={}),t[b.id][e.tailNumber]?delete t[b.id][e.tailNumber]:t[b.id][e.tailNumber]=P.find((function(t){return t.tailNumber===e.tailNumber})),i(Object(m.a)({},t))}),[l,b,i]);return r.a.createElement("div",{className:"container preferences-container"},t.map((function(e){return r.a.createElement(D,{key:e.id,onClick:function(){return d(e)},pilot:e,hasPreferences:Object.keys(l[e.id]).length,hideControls:!0})})),b?r.a.createElement("div",{className:"preferences"},r.a.createElement("h1",null,b.name),r.a.createElement(S,{isPreferences:!0,selectedPreferences:l[b.id],onClick:j}),r.a.createElement("button",{onClick:function(){return f(null)},className:"button blue"},"Done")):"")}),M=(a(44),function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(s.a)(l,2),u=o[0],m=o[1],b=Object(n.useCallback)((function(){c(!0),m("I'm almost 100% sure you don't want to do this... Are you sure? This will wipe all remembered data from this device!")}),[c,m]);return r.a.createElement("div",{className:"container settings-container"},r.a.createElement(i.b,{to:"/pilot-preferences"},r.a.createElement("button",{className:"settings-button blue"},"Pilot Preferences")),r.a.createElement(i.b,{to:"/logbook"},r.a.createElement("button",{className:"settings-button green"},"Flight Logbook")),r.a.createElement("button",{onClick:function(){return b()},className:"settings-button red"},"Clear All Data ",r.a.createElement("span",{"aria-label":"warning",role:"img"},"\u26a0\ufe0f")),a?r.a.createElement("div",{className:"confirm-dialog"},r.a.createElement("h2",null,"Are you sure?"),r.a.createElement("p",null,u),r.a.createElement("div",{className:"controls"},r.a.createElement("button",{onClick:function(){},className:"settings-button green"},"Yes"),r.a.createElement("button",{onClick:function(){return c(!1)},className:"settings-button red"},"No"))):"")}),F=function(e){var t=e.flight,a=t.glider,n=a.tailNumber,c=a.tailNumberColor,l=t.pilotInCommand.name,i=t.takeOffTime,o=t.durationOfFlight,u=t.exclude,s=void 0!==u&&u,m=e.onClick,b=void 0===m?function(){}:m,f={color:c};return r.a.createElement("div",{onClick:function(){return b()},className:"aircraft-with-pilot-container logbook ".concat(s?"exclude":"")},r.a.createElement("div",{className:"flex"},r.a.createElement("span",{style:f,className:"tail-number"},r.a.createElement("h1",null,n)),r.a.createElement("p",null,l)),r.a.createElement("div",{className:"flex timetable"},r.a.createElement("p",null,v()(i,"DD-MM-YYYY HH:mm").format("HH:mm")),r.a.createElement("p",null,o)))},L=(a(45),function(){var e=O("flights",[]),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useCallback)((function(e){var t=a.findIndex((function(t){return t.id===e.id})),n=a[t];c([].concat(Object(u.a)(a.slice(0,t)),[Object(m.a)(Object(m.a)({},n),{},{exclude:!e.exclude})],Object(u.a)(a.slice(t+1))))}),[a,c]);return r.a.createElement("div",{className:"container logbook-container"},a.map((function(e){return r.a.createElement(F,{key:e.id,onClick:function(){return l(e)},flight:e})})))}),A=(a(46),a(47),function(){return r.a.createElement("div",null,r.a.createElement(i.a,{basename:"/startofficer-app/"},r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/",exact:!0},r.a.createElement(x,null)),r.a.createElement(o.a,{path:"/aircraft"},r.a.createElement(S,null)),r.a.createElement(o.a,{path:"/pilots"},r.a.createElement(I,null)),r.a.createElement(o.a,{path:"/settings"},r.a.createElement(M,null)),r.a.createElement(o.a,{path:"/pilot-preferences"},r.a.createElement(H,null)),r.a.createElement(o.a,{path:"/logbook"},r.a.createElement(L,null))),r.a.createElement("nav",{className:"tabs"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(i.b,{to:"/pilots"},"Pilots")),r.a.createElement("li",null,r.a.createElement(i.b,{to:"/aircraft"},"Aircraft")),r.a.createElement("li",null,r.a.createElement(i.b,{to:"/",exact:!0},"Starting"))))))});l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.1a124f9a.chunk.js.map